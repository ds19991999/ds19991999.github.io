---
title: äº’è”ç½‘åè®®å…¥é—¨ğŸ˜‡
date: 2018-08-21 23:29:08
updated: 2018-08-21 23:29:08
description: ä»‹ç»è®¡ç®—æœºç½‘ç»œçš„äº”å±‚æ¨¡å‹ã€‚
categories: è®¡ç®—æœºåŸºç¡€
type: photo
photos:
- https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821220910.png
tags: 
- TCP/IP
- è®¡ç®—æœºç½‘ç»œ
music-id: 116493
---

äº’è”ç½‘çš„æ ¸å¿ƒæ˜¯ä¸€ç³»åˆ—åè®®ï¼Œæ€»ç§°ä¸º"äº’è”ç½‘åè®®"ï¼ˆInternet Protocol Suiteï¼‰ã€‚å®ƒä»¬å¯¹ç”µè„‘å¦‚ä½•è¿æ¥å’Œç»„ç½‘ï¼Œåšå‡ºäº†è¯¦å°½çš„è§„å®šã€‚ç†è§£äº†è¿™äº›åè®®ï¼Œå°±ç†è§£äº†äº’è”ç½‘çš„åŸç†ã€‚

## æ¦‚è¿°

### äº”å±‚æ¨¡å‹

äº’è”ç½‘çš„å®ç°ï¼Œåˆ†æˆå¥½å‡ å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½ï¼Œå°±åƒå»ºç­‘ç‰©ä¸€æ ·ï¼Œæ¯ä¸€å±‚éƒ½é ä¸‹ä¸€å±‚æ”¯æŒã€‚

ç”¨æˆ·æ¥è§¦åˆ°çš„ï¼Œåªæ˜¯æœ€ä¸Šé¢çš„ä¸€å±‚ï¼Œæ ¹æœ¬æ²¡æœ‰æ„Ÿè§‰åˆ°ä¸‹é¢çš„å±‚ã€‚è¦ç†è§£äº’è”ç½‘ï¼Œå¿…é¡»ä»æœ€ä¸‹å±‚å¼€å§‹ï¼Œè‡ªä¸‹è€Œä¸Šç†è§£æ¯ä¸€å±‚çš„åŠŸèƒ½ã€‚

å¦‚ä½•åˆ†å±‚æœ‰ä¸åŒçš„æ¨¡å‹ï¼Œæœ‰çš„æ¨¡å‹åˆ†ä¸ƒå±‚ï¼Œæœ‰çš„åˆ†å››å±‚ã€‚æˆ‘è§‰å¾—ï¼ŒæŠŠäº’è”ç½‘åˆ†æˆäº”å±‚ï¼Œæ¯”è¾ƒå®¹æ˜“è§£é‡Šã€‚

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ€åº•ä¸‹çš„ä¸€å±‚å«åš"å®ä½“å±‚"ï¼ˆPhysical Layerï¼‰ï¼Œæœ€ä¸Šé¢çš„ä¸€å±‚å«åš"åº”ç”¨å±‚"ï¼ˆApplication Layerï¼‰ï¼Œä¸­é—´çš„ä¸‰å±‚ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰åˆ†åˆ«æ˜¯"é“¾æ¥å±‚"ï¼ˆLink Layerï¼‰ã€"ç½‘ç»œå±‚"ï¼ˆNetwork Layerï¼‰å’Œ"ä¼ è¾“å±‚"ï¼ˆTransport Layerï¼‰ã€‚è¶Šä¸‹é¢çš„å±‚ï¼Œè¶Šé è¿‘ç¡¬ä»¶ï¼›è¶Šä¸Šé¢çš„å±‚ï¼Œè¶Šé è¿‘ç”¨æˆ·ã€‚

###  å±‚ä¸åè®®

æ¯ä¸€å±‚éƒ½æ˜¯ä¸ºäº†å®Œæˆä¸€ç§åŠŸèƒ½ã€‚ä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±éœ€è¦å¤§å®¶éƒ½éµå®ˆå…±åŒçš„è§„åˆ™ã€‚å¤§å®¶éƒ½éµå®ˆçš„è§„åˆ™ï¼Œå°±å«åš"åè®®"ï¼ˆprotocolï¼‰ã€‚

äº’è”ç½‘çš„æ¯ä¸€å±‚ï¼Œéƒ½å®šä¹‰äº†å¾ˆå¤šåè®®ã€‚è¿™äº›åè®®çš„æ€»ç§°ï¼Œå°±å«åš"äº’è”ç½‘åè®®"ï¼ˆInternet Protocol Suiteï¼‰ã€‚å®ƒä»¬æ˜¯äº’è”ç½‘çš„æ ¸å¿ƒï¼Œä¸‹é¢ä»‹ç»æ¯ä¸€å±‚çš„åŠŸèƒ½ï¼Œä¸»è¦å°±æ˜¯ä»‹ç»æ¯ä¸€å±‚çš„ä¸»è¦åè®®ã€‚

## å®ä½“å±‚(ç‰©ç†å±‚)

ç”µè„‘è¦ç»„ç½‘ï¼Œç¬¬ä¸€ä»¶äº‹è¦å¹²ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯å…ˆæŠŠç”µè„‘è¿èµ·æ¥ï¼Œå¯ä»¥ç”¨å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿ã€æ— çº¿ç”µæ³¢ç­‰æ–¹å¼ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821221334.png)

è¿™å°±å«åš"å®ä½“å±‚"ï¼Œå®ƒå°±æ˜¯æŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µã€‚å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€0å’Œ1çš„ç”µä¿¡å·ã€‚

## é“¾æ¥å±‚

### å®šä¹‰

å•çº¯çš„0å’Œ1æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¿…é¡»è§„å®šè§£è¯»æ–¹å¼ï¼šå¤šå°‘ä¸ªç”µä¿¡å·ç®—ä¸€ç»„ï¼Ÿæ¯ä¸ªä¿¡å·ä½æœ‰ä½•æ„ä¹‰ï¼Ÿè¿™å°±æ˜¯"é“¾æ¥å±‚"çš„åŠŸèƒ½ï¼Œå®ƒåœ¨"å®ä½“å±‚"çš„ä¸Šæ–¹ï¼Œç¡®å®šäº†0å’Œ1çš„**åˆ†ç»„æ–¹å¼ã€‚**

### ä»¥å¤ªç½‘åè®®

æ—©æœŸçš„æ—¶å€™ï¼Œæ¯å®¶å…¬å¸éƒ½æœ‰è‡ªå·±çš„ç”µä¿¡å·åˆ†ç»„æ–¹å¼ã€‚é€æ¸åœ°ï¼Œä¸€ç§å«åš"ä»¥å¤ªç½‘"ï¼ˆEthernetï¼‰çš„åè®®ï¼Œå æ®äº†ä¸»å¯¼åœ°ä½ã€‚

ä»¥å¤ªç½‘è§„å®šï¼Œä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå«åš"å¸§"ï¼ˆFrameï¼‰ã€‚æ¯ä¸€å¸§åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ‡å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821221452.png)

"æ ‡å¤´"åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ï¼›"æ•°æ®"åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚

"æ ‡å¤´"çš„é•¿åº¦ï¼Œå›ºå®šä¸º18å­—èŠ‚ã€‚"æ•°æ®"çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º46å­—èŠ‚ï¼Œæœ€é•¿ä¸º1500å­—èŠ‚ã€‚å› æ­¤ï¼Œæ•´ä¸ª"å¸§"æœ€çŸ­ä¸º64å­—èŠ‚ï¼Œæœ€é•¿ä¸º1518å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚

### MACåœ°å€

ä¸Šé¢æåˆ°ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„"æ ‡å¤´"ï¼ŒåŒ…å«äº†å‘é€è€…å’Œæ¥å—è€…çš„ä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œå‘é€è€…å’Œæ¥å—è€…æ˜¯å¦‚ä½•æ ‡è¯†å‘¢ï¼Ÿ

ä»¥å¤ªç½‘è§„å®šï¼Œè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ï¼Œéƒ½å¿…é¡»å…·æœ‰**"ç½‘å¡"æ¥å£**ã€‚æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡ã€‚**ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œè¿™å«åšMACåœ°å€ã€‚**

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821221549.png)

æ¯å—ç½‘å¡å‡ºå‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ª**å…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„MACåœ°å€**ï¼Œé•¿åº¦æ˜¯48ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨**12ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤º**ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821221635.png)

**å‰6ä¸ªåå…­è¿›åˆ¶æ•°æ˜¯å‚å•†ç¼–å·ï¼Œå6ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº†MACåœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚**

### å¹¿æ’­

å®šä¹‰åœ°å€åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œåé¢è¿˜æœ‰æ›´å¤šçš„æ­¥éª¤ã€‚

é¦–å…ˆï¼Œä¸€å—ç½‘å¡æ€ä¹ˆä¼šçŸ¥é“å¦ä¸€å—ç½‘å¡çš„MACåœ°å€ï¼Ÿ

å›ç­”æ˜¯æœ‰ä¸€ç§ARPåè®®ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œç„¶åæ‰èƒ½å‘é€ã€‚

å…¶æ¬¡ï¼Œå°±ç®—æœ‰äº†MACåœ°å€ï¼Œç³»ç»Ÿæ€æ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Ÿ

å›ç­”æ˜¯ä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆ"åŸå§‹"çš„æ–¹å¼ï¼Œ**å®ƒä¸æ˜¯æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Œè€Œæ˜¯å‘æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœºå‘é€ï¼Œè®©æ¯å°è®¡ç®—æœºè‡ªå·±åˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºæ¥æ”¶æ–¹ã€‚**

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821221800.png)



ä¸Šå›¾ä¸­ï¼Œ1å·è®¡ç®—æœºå‘2å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„3å·ã€4å·ã€5å·è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ…ã€‚å®ƒä»¬è¯»å–è¿™ä¸ªåŒ…çš„"æ ‡å¤´"ï¼Œæ‰¾åˆ°æ¥æ”¶æ–¹çš„MACåœ°å€ï¼Œç„¶åä¸è‡ªèº«çš„MACåœ°å€ç›¸æ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œå°±æ¥å—è¿™ä¸ªåŒ…ï¼Œåšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚è¿™ç§å‘é€æ–¹å¼å°±å«åš"å¹¿æ’­"ï¼ˆbroadcastingï¼‰ã€‚

æœ‰äº†**æ•°æ®åŒ…çš„å®šä¹‰ã€ç½‘å¡çš„MACåœ°å€ã€å¹¿æ’­çš„å‘é€æ–¹å¼**ï¼Œ"é“¾æ¥å±‚"å°±å¯ä»¥åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†ã€‚

## ç½‘ç»œå±‚

### ç½‘ç»œå±‚çš„ç”±æ¥

ä»¥å¤ªç½‘åè®®ï¼Œä¾é MACåœ°å€å‘é€æ•°æ®ã€‚ç†è®ºä¸Šï¼Œå•å•ä¾é MACåœ°å€ï¼Œä¸Šæµ·çš„ç½‘å¡å°±å¯ä»¥æ‰¾åˆ°æ´›æ‰çŸ¶çš„ç½‘å¡äº†ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å¯ä»¥å®ç°çš„ã€‚

ä½†æ˜¯ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªé‡å¤§çš„ç¼ºç‚¹ã€‚ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€"åŒ…"ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚**ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†çš„ï¼Œå¦åˆ™äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…ï¼Œé‚£ä¼šå¼•èµ·ç¾éš¾ã€‚**

å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº›MACåœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œï¼Œå“ªäº›ä¸æ˜¯ã€‚**å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨"è·¯ç”±"æ–¹å¼å‘é€ã€‚**ï¼ˆ"è·¯ç”±"çš„æ„æ€ï¼Œå°±æ˜¯æŒ‡**å¦‚ä½•å‘ä¸åŒçš„å­ç½‘ç»œåˆ†å‘æ•°æ®åŒ…**ï¼‰é—æ†¾çš„æ˜¯ï¼ŒMACåœ°å€æœ¬èº«æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒåªä¸å‚å•†æœ‰å…³ï¼Œä¸æ‰€å¤„ç½‘ç»œæ— å…³ã€‚

è¿™å°±å¯¼è‡´äº†"ç½‘ç»œå±‚"çš„è¯ç”Ÿã€‚å®ƒçš„ä½œç”¨æ˜¯**å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€**ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œã€‚**è¿™å¥—åœ°å€å°±å«åš"ç½‘ç»œåœ°å€"ï¼Œç®€ç§°"ç½‘å€"ã€‚**

äºæ˜¯ï¼Œ"ç½‘ç»œå±‚"å‡ºç°ä»¥åï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯MACåœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€ã€‚ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼ŒMACåœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç®¡ç†å‘˜åˆ†é…çš„ï¼Œå®ƒä»¬åªæ˜¯éšæœºç»„åˆåœ¨ä¸€èµ·ã€‚

ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œï¼ŒMACåœ°å€åˆ™å°†æ•°æ®åŒ…é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡ã€‚å› æ­¤ï¼Œä»é€»è¾‘ä¸Šå¯ä»¥æ¨æ–­ï¼Œå¿…å®šæ˜¯å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶åå†å¤„ç†MACåœ°å€ã€‚

### IPåè®®

**è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åšIPåè®®**ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸ºIPåœ°å€ã€‚

ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯IPåè®®ç¬¬å››ç‰ˆï¼Œç®€ç§°IPv4ã€‚è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”±**32ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆã€‚**

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821222118.png)

ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ†æˆ**å››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤ºIPåœ°å€**ï¼Œä»0.0.0.0ä¸€ç›´åˆ°255.255.255.255ã€‚

äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ªIPåœ°å€ã€‚è¿™ä¸ªåœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œ**å‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œï¼Œåä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœºã€‚**æ¯”å¦‚ï¼ŒIPåœ°å€172.16.254.1ï¼Œè¿™æ˜¯ä¸€ä¸ª32ä½çš„åœ°å€ï¼Œå‡å®šå®ƒçš„ç½‘ç»œéƒ¨åˆ†æ˜¯**å‰24ä½ï¼ˆ172.16.254ï¼‰ï¼Œé‚£ä¹ˆä¸»æœºéƒ¨åˆ†å°±æ˜¯å8ä½ï¼ˆæœ€åçš„é‚£ä¸ª1ï¼‰**ã€‚å¤„äºåŒä¸€ä¸ªå­ç½‘ç»œçš„ç”µè„‘ï¼Œå®ƒä»¬IPåœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´172.16.254.2åº”è¯¥ä¸172.16.254.1å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚

ä½†æ˜¯ï¼Œé—®é¢˜åœ¨äº**å•å•ä»IPåœ°å€ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†**ã€‚è¿˜æ˜¯ä»¥172.16.254.1ä¸ºä¾‹ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†ï¼Œåˆ°åº•æ˜¯å‰24ä½ï¼Œè¿˜æ˜¯å‰16ä½ï¼Œç”šè‡³å‰28ä½ï¼Œä»IPåœ°å€ä¸Šæ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚

é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½ä»IPåœ°å€ï¼Œåˆ¤æ–­ä¸¤å°è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œå‘¢ï¼Ÿè¿™å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªå‚æ•°**"å­ç½‘æ©ç "ï¼ˆsubnet maskï¼‰**ã€‚

æ‰€è°“"å­ç½‘æ©ç "ï¼Œå°±æ˜¯**è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°**ã€‚å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäºIPåœ°å€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª32ä½äºŒè¿›åˆ¶æ•°å­—ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨éƒ¨ä¸º1ï¼Œä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º0ã€‚æ¯”å¦‚ï¼ŒIPåœ°å€172.16.254.1ï¼Œå¦‚æœå·²çŸ¥ç½‘ç»œéƒ¨åˆ†æ˜¯å‰24ä½ï¼Œä¸»æœºéƒ¨åˆ†æ˜¯å8ä½ï¼Œé‚£ä¹ˆå­ç½‘ç»œæ©ç å°±æ˜¯11111111.11111111.11111111.00000000ï¼Œå†™æˆåè¿›åˆ¶å°±æ˜¯255.255.255.0ã€‚

çŸ¥é“"å­ç½‘æ©ç "ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­ï¼Œä»»æ„ä¸¤ä¸ªIPåœ°å€æ˜¯å¦å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚æ–¹æ³•æ˜¯å°†**ä¸¤ä¸ªIPåœ°å€ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡ŒANDè¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º1ï¼Œè¿ç®—ç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ï¼‰**ï¼Œç„¶åæ¯”è¾ƒç»“æœæ˜¯å¦ç›¸åŒï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±è¡¨æ˜å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œå¦åˆ™å°±ä¸æ˜¯ã€‚

æ¯”å¦‚ï¼Œå·²çŸ¥IPåœ°å€172.16.254.1å’Œ172.16.254.233çš„å­ç½‘æ©ç éƒ½æ˜¯255.255.255.0ï¼Œè¯·é—®å®ƒä»¬æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Ÿä¸¤è€…ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡ŒANDè¿ç®—ï¼Œç»“æœéƒ½æ˜¯172.16.254.0ï¼Œå› æ­¤å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚

æ€»ç»“ä¸€ä¸‹ï¼ŒIPåè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œ**ä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é…IPåœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯ç¡®å®šå“ªäº›åœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚**

### IPæ•°æ®åŒ…

æ ¹æ®IPåè®®å‘é€çš„æ•°æ®ï¼Œå°±å«åšIPæ•°æ®åŒ…ã€‚ä¸éš¾æƒ³è±¡ï¼Œå…¶ä¸­å¿…å®šåŒ…æ‹¬IPåœ°å€ä¿¡æ¯ã€‚

ä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å«MACåœ°å€ï¼Œå¹¶æ²¡æœ‰IPåœ°å€çš„æ ä½ã€‚é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ ä½å‘¢ï¼Ÿ

å›ç­”æ˜¯ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ**IPæ•°æ®åŒ…ç›´æ¥æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„"æ•°æ®"éƒ¨åˆ†**ï¼Œå› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼ã€‚è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æ„çš„å¥½å¤„ï¼šä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æ„ã€‚

å…·ä½“æ¥è¯´ï¼ŒIPæ•°æ®åŒ…ä¹Ÿåˆ†ä¸º"æ ‡å¤´"å’Œ"æ•°æ®"ä¸¤ä¸ªéƒ¨åˆ†ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821222515.png)

**"æ ‡å¤´"éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IPåœ°å€ç­‰ä¿¡æ¯ï¼Œ"æ•°æ®"éƒ¨åˆ†åˆ™æ˜¯IPæ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚**å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…åï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821222544.png)

### ARPåè®®

å› ä¸ºIPæ•°æ®åŒ…æ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œå‘é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åŒæ—¶çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼Œä¸€ä¸ªæ˜¯å¯¹æ–¹çš„MACåœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„IPåœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ–¹çš„IPåœ°å€æ˜¯å·²çŸ¥çš„ï¼ˆåæ–‡ä¼šè§£é‡Šï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„MACåœ°å€ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä»IPåœ°å€å¾—åˆ°MACåœ°å€ã€‚

è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœ**ä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œ**ï¼Œé‚£ä¹ˆäº‹å®ä¸Šæ²¡æœ‰åŠæ³•å¾—åˆ°å¯¹æ–¹çš„MACåœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿æ¥å¤„çš„"ç½‘å…³"ï¼ˆgatewayï¼‰ï¼Œ**è®©ç½‘å…³å»å¤„ç†**ã€‚

ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ARPåè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„**MACåœ°å€**ã€‚ARPåè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„IPåœ°å€ï¼Œåœ¨å¯¹æ–¹çš„MACåœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯FF:FF:FF:FF:FF:FFï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª"å¹¿æ’­"åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»ä¸­å–å‡ºIPåœ°å€ï¼Œä¸è‡ªèº«çš„IPåœ°å€è¿›è¡Œæ¯”è¾ƒã€‚**å¦‚æœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„MACåœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚**

æ€»ä¹‹ï¼Œæœ‰äº†**ARPåè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœºMACåœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šäº†ã€‚**

### ä¼ è¾“å±‚

### ä¼ è¾“å±‚çš„ç”±æ¥

æœ‰äº†MACåœ°å€å’ŒIPåœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚

æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸æœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»äº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€ä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜**éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åš"ç«¯å£"ï¼ˆportï¼‰**ï¼Œå®ƒå…¶å®æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚

"ç«¯å£"æ˜¯0åˆ°65535ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½**16ä¸ªäºŒè¿›åˆ¶ä½ã€‚0åˆ°1023çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº1023çš„ç«¯å£**ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åä¸æœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚

"ä¼ è¾“å±‚"çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹**"ç«¯å£åˆ°ç«¯å£"çš„é€šä¿¡**ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ"ç½‘ç»œå±‚"çš„åŠŸèƒ½æ˜¯å»ºç«‹**"ä¸»æœºåˆ°ä¸»æœº"çš„é€šä¿¡**ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠ**ä¸»æœº+ç«¯å£ï¼Œå«åš"å¥—æ¥å­—"ï¼ˆsocketï¼‰**ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚

### UDPåè®®

ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åšUDPåè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚

UDPæ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±"æ ‡å¤´"å’Œ"æ•°æ®"ä¸¤éƒ¨åˆ†ç»„æˆã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821222849.png)

"æ ‡å¤´"éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œ"æ•°æ®"éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åï¼ŒæŠŠæ•´ä¸ªUDPæ•°æ®åŒ…æ”¾å…¥IPæ•°æ®åŒ…çš„**"æ•°æ®"éƒ¨åˆ†**ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIPæ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ç°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821222934.png)

UDPæ•°æ®åŒ…éå¸¸ç®€å•ï¼Œ"æ ‡å¤´"éƒ¨åˆ†ä¸€å…±åªæœ‰8ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡65,535å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚

### TCPåè®®

UDPåè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCPåè®®å°±è¯ç”Ÿäº†ã€‚è¿™ä¸ªåè®®éå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„UDPåè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚

å› æ­¤ï¼ŒTCPåè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚

TCPæ•°æ®åŒ…å’ŒUDPæ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨IPæ•°æ®åŒ…çš„"æ•°æ®"éƒ¨åˆ†ã€‚TCPæ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œé€šå¸¸TCPæ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡IPæ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ªTCPæ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚

## åº”ç”¨å±‚

åº”ç”¨ç¨‹åºæ”¶åˆ°"ä¼ è¾“å±‚"çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºäº’è”ç½‘æ˜¯å¼€æ”¾æ¶æ„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚

**"åº”ç”¨å±‚"çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚**

ä¸¾ä¾‹æ¥è¯´ï¼ŒTCPåè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚Emailã€WWWã€FTPç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTPæ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æ„æˆäº†"åº”ç”¨å±‚"ã€‚

è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨TCPæ•°æ®åŒ…çš„"æ•°æ®"éƒ¨åˆ†ã€‚å› æ­¤ï¼Œç°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚

![](https://raw.githubusercontent.com/ds19991999/githubimg/master/picgo/20180821223100.png)

> æ¥æºï¼š[äº’è”ç½‘å…¥é—¨åè®®](https://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html)

